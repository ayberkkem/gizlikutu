<!doctype html>
<html lang="tr">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>PopÃ¼ler ÃœrÃ¼nler | Gizli Kutu</title>
    <meta name="description"
        content="Gizli Kutu'nun en popÃ¼ler Ã¼rÃ¼nlerini keÅŸfedin. Gizli paketleme, gÃ¼venli Ã¶deme ve hÄ±zlÄ± teslimat." />

    <link rel="manifest" href="./manifest.webmanifest">
    <link rel="icon" href="./assets/logo.svg" type="image/svg+xml">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/pages/popular.css">
    <link rel="stylesheet" href="./css/category-nav.css">
    <link rel="stylesheet" href="./css/pwa-install-icon.css">
</head>

<body>
    <div class="drawerBackdrop" id="drawerBackdrop"></div>
    <aside class="drawer" id="drawer" aria-label="MenÃ¼">
        <div class="row" style="justify-content:space-between">
            <div class="brand"><img src="./assets/logo.jpg" alt="Gizli Kutu"><b>Gizli Kutu</b></div>
            <button class="iconbtn" id="closeDrawer">âœ•</button>
        </div>

        <h5>Kategoriler</h5>
        <div id="hamburgerCategories"></div>
        <h4>Kurumsal</h4>
        <a class="navlink" data-close-drawer href="./about.html">HakkÄ±mÄ±zda</a>
        <a class="navlink" data-close-drawer href="./contact.html">Ä°letiÅŸim</a>

        <h6>SÃ¶zleÅŸmeler</h6>
        <a class="navlink" data-close-drawer href="./kvkk.html">KVKK</a>
        <a class="navlink" data-close-drawer href="./privacy.html">Gizlilik PolitikasÄ±</a>
        <a class="navlink" data-close-drawer href="./terms.html">KullanÄ±m KoÅŸullarÄ±</a>
        <a class="navlink" data-close-drawer href="./distance-sales.html">Mesafeli SatÄ±ÅŸ SÃ¶zleÅŸmesi</a>
        <a class="navlink" data-close-drawer href="./returns.html">Ä°ade & DeÄŸiÅŸim</a>

        <div class="notice">
            WhatsApp hÄ±zlÄ± hat: <a href="https://wa.me/905400443445" target="_blank" rel="noopener">tÄ±kla</a><br>

        </div>
    </aside>

    <header class="topbar">
        <div class="container header">
            <button class="iconbtn" id="menuBtn" aria-label="MenÃ¼">â˜°</button>

            <a class="brand" href="./index.html" aria-label="Gizli Kutu">
                <img src="./assets/logo.jpg" alt="Gizli Kutu logo">
                <b>Gizli Kutu</b>
            </a>

            <div class="header-right" style="flex:1">
                <a class="iconbtn" aria-label="WhatsApp" href="https://wa.me/905400443445" target="_blank"
                    rel="noopener" title="WhatsApp">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                        <path
                            d="M20 11.6c0 4.6-3.8 8.4-8.4 8.4-1.5 0-2.9-.4-4.2-1.1L4 20l1.2-3.3c-.8-1.3-1.2-2.8-1.2-4.4C4 7 7.8 3.2 12.4 3.2 16.9 3.2 20.7 7 20.7 11.6Z"
                            stroke="#25D366" stroke-width="1.5" fill="#25D366" fill-opacity="0.1" />
                        <path
                            d="M9.2 8.8c.2-.4.4-.4.6-.4h.5c.2 0 .4.1.5.3l.7 1.7c.1.2.1.4 0 .5l-.3.5c-.1.2-.1.4 0 .6.4.7 1.2 1.5 2 2 .2.1.4.1.6 0l.5-.3c.2-.1.4-.1.5 0l1.7.7c.2.1.3.3.3.5v.5c0 .2 0 .4-.4.6-.4.2-1.2.4-2.1.1-1-.3-2.2-1-3.2-2s-1.7-2.2-2-3.2c-.3-.9-.1-1.7.1-2.1Z"
                            fill="#25D366" />
                    </svg>
                </a>

                <!-- Mobil arama toggle butonu -->
                <button class="iconbtn searchToggleBtn" id="searchToggle" aria-label="Ara">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                        <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="#111827" stroke-width="1.5" />
                        <path d="M16.2 16.2 21 21" stroke="#111827" stroke-width="1.5" stroke-linecap="round" />
                    </svg>
                </button>

                <div class="search" id="searchBox" title="ÃœrÃ¼n ara">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                        <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="#111827" stroke-width="1.5" />
                        <path d="M16.2 16.2 21 21" stroke="#111827" stroke-width="1.5" stroke-linecap="round" />
                    </svg>
                    <input id="globalSearch" placeholder="ÃœrÃ¼n ara..." autocomplete="off" />
                </div>

                <a class="iconbtn cartWrap" href="./cart.html" aria-label="Sepet">
                    ðŸ›’
                    <span class="badge" id="cartCount" style="display:none">0</span>
                </a>

                <!-- PC Header Nav - Sadece Desktop -->
                <nav class="desktop-header-nav">
                    <a href="./index.html">Anasayfa</a>
                    <a href="./products.html">PopÃ¼ler ÃœrÃ¼nler</a>
                    <a href="./about.html">HakkÄ±mÄ±zda</a>
                    <a href="./contact.html">Ä°letiÅŸim</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Kategori Navigasyon -->
    <nav id="categoryNav" class="category-nav-wrapper"></nav>

    <!-- Mobil Ãœst Nav - Trendyol TarzÄ± (Sadece Mobilde GÃ¶rÃ¼nÃ¼r) -->
    <nav class="mobile-top-nav">
        <a href="./index.html">Anasayfa</a>
        <a href="./products.html" class="active">PopÃ¼ler ÃœrÃ¼nler</a>
        <a href="./about.html">HakkÄ±mÄ±zda</a>
        <a href="./contact.html">Ä°letiÅŸim</a>
    </nav>

    <main class="container">
        <div class="popular-page-header">
            <h1>PopÃ¼ler ÃœrÃ¼nler</h1>
            <p>En Ã§ok tercih edilen Ã¼rÃ¼nlerimizi keÅŸfedin</p>
        </div>

        <div class="grid" id="popularGrid"></div>
    </main>

    <footer class="footer">
        <div class="container">
            Â© <span id="y"></span> Gizli Kutu â€¢
            <a href="./privacy.html">Gizlilik</a> â€¢
            <a href="./kvkk.html">KVKK</a> â€¢
            <a href="./terms.html">KoÅŸullar</a> â€¢
            <a href="./contact.html">Ä°letiÅŸim</a>
        </div>
    </footer>

    <script src="./js/storage.js"></script>
    <script src="./js/app.js"></script>
    <script src="./js/ui.js"></script>

    <script>
        GK.bindGlobalUI();
        document.getElementById("y").textContent = new Date().getFullYear();

        // PopÃ¼ler Ã¼rÃ¼nleri yÃ¼kle
        GK.loadProducts().then(ps => {
            const products = ps.map(GKUI.productCard).join("");
            document.getElementById("popularGrid").innerHTML = products;
        });
    </script>

    <!-- Hamburger menÃ¼ kategorilerini JSON'dan yÃ¼kle -->
    <script>
        (async function () {
            try {
                const res = await fetch("./data/categories.json", { cache: "no-store" });
                const categories = await res.json();
                const box = document.getElementById("hamburgerCategories");
                if (!box) return;
                box.innerHTML = categories.map(cat => `
          <a class="navlink" data-close-drawer href="./products.html?cat=${cat.id}">
            ${cat.label}
          </a>
        `).join("");
            } catch (e) {
                console.error("Hamburger kategori yÃ¼kleme hatasÄ±", e);
            }
        })();
    </script>

    <!-- Mobil Arama Toggle -->
    <script>
        (function () {
            const toggleBtn = document.getElementById('searchToggle');
            const searchBox = document.getElementById('searchBox');
            if (toggleBtn && searchBox) {
                toggleBtn.addEventListener('click', function () {
                    searchBox.classList.toggle('search-open');
                });
            }
        })();
    </script>

    <script src="./js/age-gate.js"></script>
    <script src="./js/category-nav.js" defer></script>

    <!-- ðŸ’¬ CanlÄ± Destek -->
    <div class="live-support" id="liveSupport">
        <div class="live-header">
            <span>ðŸ’¬ CanlÄ± Destek</span>
            <div style="display:flex;gap:4px">
                <button id="minimizeSupport" title="KÃ¼Ã§Ã¼lt">âˆ’</button>
                <button id="closeSupport" title="Kapat">âœ•</button>
            </div>
        </div>

        <div class="live-body">
            <div class="live-welcome">
                Merhaba ðŸ‘‹<br>
                Size nasÄ±l yardÄ±mcÄ± olabiliriz?
            </div>

            <textarea id="supportMsg" placeholder="MesajÄ±nÄ±zÄ± yazÄ±n..."></textarea>

            <button id="sendSupport">WhatsApp'tan GÃ¶nder</button>
        </div>
    </div>

    <!-- Minimized floating WhatsApp logo -->
    <div class="live-support-mini" id="liveSupportMini" title="CanlÄ± Destek">
        <svg viewBox="0 0 24 24" fill="none">
            <path
                d="M20 11.6c0 4.6-3.8 8.4-8.4 8.4-1.5 0-2.9-.4-4.2-1.1L4 20l1.2-3.3c-.8-1.3-1.2-2.8-1.2-4.4C4 7 7.8 3.2 12.4 3.2 16.9 3.2 20.7 7 20.7 11.6Z"
                fill="#fff" />
            <path
                d="M9.2 8.8c.2-.4.4-.4.6-.4h.5c.2 0 .4.1.5.3l.7 1.7c.1.2.1.4 0 .5l-.3.5c-.1.2-.1.4 0 .6.4.7 1.2 1.5 2 2 .2.1.4.1.6 0l.5-.3c.2-.1.4-.1.5 0l1.7.7c.2.1.3.3.3.5v.5c0 .2 0 .4-.4.6-.4.2-1.2.4-2.1.1-1-.3-2.2-1-3.2-2s-1.7-2.2-2-3.2c-.3-.9-.1-1.7.1-2.1Z"
                fill="#25D366" />
        </svg>
    </div>

    <script>
        (function () {
            const phone = "905400443445";

            const box = document.getElementById("liveSupport");
            const closeBtn = document.getElementById("closeSupport");
            const minimizeBtn = document.getElementById("minimizeSupport");
            const sendBtn = document.getElementById("sendSupport");
            const textarea = document.getElementById("supportMsg");
            const miniBtn = document.getElementById("liveSupportMini");

            closeBtn.onclick = () => {
                box.style.display = "none";
                miniBtn.classList.remove("active");
            };

            minimizeBtn.onclick = () => {
                box.style.display = "none";
                miniBtn.classList.add("active");
            };

            miniBtn.onclick = () => {
                miniBtn.classList.remove("active");
                box.style.display = "";
            };

            sendBtn.onclick = () => {
                const msg = textarea.value.trim();
                if (!msg) {
                    alert("LÃ¼tfen mesajÄ±nÄ±zÄ± yazÄ±n ðŸ™‚");
                    return;
                }

                const text = encodeURIComponent(
                    "ðŸ“© Gizli Kutu CanlÄ± Destek MesajÄ±:\n\n" + msg
                );

                window.open(`https://wa.me/${phone}?text=${text}`, "_blank");
                textarea.value = "";
            };
        })();
    </script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(reg => console.log('SW registered:', reg.scope))
                    .catch(err => console.warn('SW failed:', err));
            });
        }
    </script>

    <!-- PWA Install Icon -->
    <script src="./js/pwa-install-icon.js"></script>

</body>

</html>